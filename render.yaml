# Render Blueprint specification
services:
  # Backend API service (not publicly accessible)
  - type: web
    name: gpt-researcher-api
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    plan: starter
    branch: master
    numInstances: 1
    healthCheckPath: /health
    envVars:
      - key: OPENAI_API_KEY
        sync: false
      - key: TAVILY_API_KEY
        sync: false
      - key: LANGCHAIN_API_KEY
        sync: false
      - key: LOGGING_LEVEL
        value: INFO
    disk:
      name: gpt-researcher-disk
      mountPath: /usr/src/app/outputs
      sizeGB: 10
    autoDeploy: false

  # Frontend NextJS service (publicly accessible)
  - type: web
    name: gpt-researcher-frontend
    runtime: docker
    dockerfilePath: ./frontend/nextjs/Dockerfile.dev
    dockerContext: ./frontend/nextjs
    plan: standard
    branch: master
    numInstances: 1
    healthCheckPath: /
    envVars:
      - key: NEXT_PUBLIC_GPTR_API_URL
        value: http://gpt-researcher-api:8000
      - key: NEXT_PUBLIC_GA_MEASUREMENT_ID
        sync: false
      - key: CHOKIDAR_USEPOLLING
        value: "true"
      - key: NODE_ENV
        value: production
    autoDeploy: false
